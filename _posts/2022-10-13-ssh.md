---
title: SSH
categories: [Computer engineering, Cloud infrastructure]
tags: [infrastructure, SSH, 인프라, 프로토콜]
---

네이버클라우드에서 인턴십을 하며 공부한 내용을 정리하는 다섯 번째 포스팅 시간입니다. 이번 포스팅에서는 SSH라는 보안 프로토콜에 대해 알아보도록 하겠습니다.

## SSH란?

SSH는 Secure Shell의 줄임말로, 원격 호스트에 접속하기 위해 사용되는 보안 프로토콜입니다. 여기서 Shell이란 커널과 사용자 간의 다리 역할을 하는 인터페이스로 사용자로부터 명령을 받아 그 명령을 해석하고 실행하는 역할을 합니다. 기존 원격 접속은 텔넷(Telnet)이라는 방식을 사용했는데, 암호화를 제공하지 않아 보안상 취약합니다. 그래서 SSH가 등장했습니다. 
SSH를 구성하는 핵심 키워드는 KEY입니다. 사용자와 서버가 각각 키를 보유하고 있으며 이 키를 이용해 연결 상대를 인증하고 안전하게 데이터를 주고 받을 수 있게 됩니다. 여기서 키를 생성하는 방식은 아래와 같이 두 가지가 있습니다.

## 비대칭키 방식

우선 비대칭키 방식은 연결 상대를 검증하기 위해 사용합니다. 비대칭 키 방식에서는 서버 또는 사용자가 Key Pair를 생성하는데 이 Key pair는 공개 키와 개인 키 두 개가 한 쌍으로 이루어져 있습니다. 보통 공개 키는 .pub, 개인 키는 .pem의 파일 확장자를 가지고 있습니다. 공개 키는 이름에서 알 수 있듯이 공개되어 있어서 누구나 가질 수 있고 유출되어도 크게 문제가 되지 않습니다. 서버는 공개 키를 받아서 이 공개 키를 이용해 랜덤한 값을 생성해내고 이 값은 추후 사용자 인증에 필요한 검사지로 활용됩니다. 개인 키는 공개 키와 다르게 보여주지 않고 가지고 있어야할 파일입니다. 공개 키를 통해 만들었던 그 검사지는 해당 검사지를 만들었을 때 사용한 공개 키와 Pair인 개인 키로만 풀 수 있고 이 개인 키는 사용자만이 가지고 있으므로 이 검사지를 풀어 서버에게 전달하면 서버는 정답인지 비교하여 사용자 인증을 합니다.

## 대칭키 방식

올바른 사용자임이 확인되었다면, 이제는 데이터를 주고받을 차례입니다. 이때도 보안을 위해 암호화가 사용되는데 이때 쓰이는 방식이 대칭 키 방식입니다. 대칭 키에서는 비대칭 키와 다르게 1개의 공통된 키를 사용합니다. 사용자 또는 서버가 1개의 대칭 키를 만들어서 서로 공유하고 공유한 대칭 키를 이용해 정보를 암호화하면, 받은 쪽에서도 동일한 대칭 키로 암호를 풀어 정보를 해석할 수 있게 됩니다. 정보 교환이 완료되면 사용했던 대칭 키는 모두 폐기시키고 나중에 연결할 때마다 새로운 대칭 키를 생성하여 사용합니다.

## 데이터를 서로 주고 받을 때 비대칭 키 방식은 사용하지 않는지?

제가 생각했을 때는 우선 비대칭 키 방식은 개인 키를 가지고 있는 사람만이 정보를 해독할 수 있기 때문에 비대칭 키 방식을 통해 데이터를 안전하게 주고 받으려면 서버와 클라이언트가 각각 공개 키 1개와 비공개 키 1개 씩을 가지고 있어야 해서 대칭 키 방식에 비해 가지고 있어야 하는 키가 더 많아지고 이를 관리하고 사용하는데 있어서 대칭 키 방식보다 더 많은 시간과 비용이 걸리지만 더 안전할 것 같습니다. 따라서 구성해야 하는 보안 수준에 따라 선택적으로 사용하거나 두 개의 방식을 섞어서 사용하는 경우도 있는 것 같습니다.


## References
> https://library.gabia.com/contents/infrahosting/9002 

